@page
@model WebHomePro.Pages.Cliente.MenuClienteModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>HomePro - Menú Cliente</title>
    <link rel="icon" type="image/x-icon" href="~/assets/favicon.ico" />

    <!-- Bootstrap + estilos -->
    <link href="~/css/StyleMenuAdmin.css" rel="stylesheet" />
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" asp-page="/Cliente/MenuCliente">
                <img src="~/img/LOGO HOMEPRO.png" alt="Logo" style="height: 5rem;" />
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                Menu <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto py-4 py-lg-0">

                    <!-- Opciones del menú -->
                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" asp-page="/Cliente/Lineas">Líneas Activas a su Nombre</a></li>

                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" asp-page="/Cliente/CargarSaldo">Cargar saldo a línea PREPAGO</a></li>

                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" asp-page="/#">Pagar factura Pendiente</a></li>

                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" asp-page="/#">Devolver una Línea</a></li>

                    <li class="nav-item"><a class="nav-link px-lg-3 py-3 py-lg-4" asp-page="/Login">Salir del Sitio</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- HEADER -->
    <header class="masthead" style="background-image: url('@Url.Content("~/img/home-bg.jpg")')">
        <div class="container text-center">
            <h1>Líneas activas a su nombre</h1>
            <span class="subheading">Visualización y verificación de saldos y pendientes</span>
        </div>
    </header>

    <!-- CONTENIDO -->
    <section class="py-5">
        <div class="container">

            @if (!string.IsNullOrWhiteSpace(Model.Error))
            {
                <div class="alert alert-danger">@Model.Error</div>
            }

            <!-- Prepago -->
            <h3 class="mb-3">📱 Líneas Prepago</h3>
            @if (Model.LineasPrepago.Count == 0)
            {
                <div class="alert alert-info">No tienes líneas prepago registradas.</div>
            }
            else
            {
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>Teléfono</th>
                            <th class="text-end">Saldo disponible</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var l in Model.LineasPrepago)
                        {
                            <tr ondblclick="location.href='@Url.Page("/Cliente/CargarSaldo", new { telefono = l.Telefono })'">
                                <td>@l.Telefono</td>
                                <td class="text-end">@l.SaldoDisponible.ToString("N2")</td>
                            </tr>
                        }
                    </tbody>
                </table>
                <p class="text-muted"><small>💡 Doble clic sobre un teléfono para recargar saldo (CLIENTE5).</small></p>
            }

            <hr />

            <!-- Postpago -->
            <h3 class="mb-3">📞 Líneas Postpago</h3>
            @if (Model.LineasPostpago.Count == 0)
            {
                <div class="alert alert-info">No tienes líneas postpago registradas.</div>
            }
            else
            {
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>Teléfono</th>
                            <th class="text-end">Monto pendiente</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var l in Model.LineasPostpago)
                        {
                            <tr ondblclick="@(l.MontoPendiente > 0
                                                                                ? $"location.href='{Url.Page("/Cliente/PagarFactura", new { telefono = l.Telefono })}'"
                                                                                : "alert('Esta línea no tiene facturación pendiente.')")">
                        <td>@l.Telefono</td>
                        <td class="text-end">@l.MontoPendiente.ToString("N2")</td>
                    </tr>
                                        }
                    </tbody>
                </table>
                <p class="text-muted"><small>💡 Doble clic sobre un teléfono con monto pendiente para pagar factura (CLIENTE6).</small></p>
            }

        </div>
    </section>

    <!-- FOOTER -->
    <footer class="border-top text-center py-3">
        <div class="small text-muted">Derechos Reservados © HomePro 2025</div>
    </footer>
</body>
</html>
